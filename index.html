<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content='A wrapper for the HEC-DSS Java API
    (https://www.hec.usace.army.mil/confluence/dssdocs/dssjavaprogrammer)
    allowing an interface between R and many common hydrologic models.
    This is a rewrite of the original "dssrip" package.'>
<title>DSS R Interface Project (2) • dssrip2</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="DSS R Interface Project (2)">
<meta property="og:description" content='A wrapper for the HEC-DSS Java API
    (https://www.hec.usace.army.mil/confluence/dssdocs/dssjavaprogrammer)
    allowing an interface between R and many common hydrologic models.
    This is a rewrite of the original "dssrip" package.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dssrip2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2-0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/quickstart.html">Quick Start with dssrip2</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mkoohafkan/dssrip2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dss-r-interface-project-2">DSS R Interface Project (2)<a class="anchor" aria-label="anchor" href="#dss-r-interface-project-2"></a>
</h1></div>
<p><!-- badges: start --> <img src="https://www.r-pkg.org/badges/version-last-release/dssrip2" alt="CRAN Release"><a href="https://github.com/mkoohafkan/dssrip2/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/mkoohafkan/dssrip2/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <!-- badges: end --></p>
<p>A rewrite of <a href="https://github.com/eheisman/dssrip" class="external-link"><code>dssrip</code></a>. Supports reading and writing time series and paired data to DSS. Linux support and read/write support for DSS grid data is planned.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>You can install the <code>dssrip2</code> directly using</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mkoohafkan/dssrip2"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="existing-hec-dssvue-install">Existing HEC-DSSVue install<a class="anchor" aria-label="anchor" href="#existing-hec-dssvue-install"></a>
</h3>
<p>A 64-bit install of HEC-DSSVue and a 64-bit JDK are required. To load DSS functionality, call</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mkoohafkan/dssrip2" class="external-link">dssrip2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/dss_connect.html">dss_connect</a></span><span class="op">(</span><span class="st">"path/to/HEC-DSSVue"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="reference/dss_connect.html">dss_connect()</a></code> will retrieve the path using <code>getOption("dss.home")</code> if no path is provided.</p>
<p>To suppress messages from DSS, use</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dss_connect.html">dss_connect</a></span><span class="op">(</span>message_level <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or after calling dss_connect()</span></span>
<span><span class="fu"><a href="reference/dss_message_level.html">dss_message_level</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span></span></code></pre></div>
<p>If no message level is provided, <code><a href="reference/dss_message_level.html">dss_message_level()</a></code> will retrieve the level using <code>getOption("dss.messagelevel")</code>.</p>
<p>You can set either or both of these options in your <code>.Rprofile</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste this into .Rprofile</span></span>
<span><span class="co"># (replace with the install path on your machine)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  dss.home <span class="op">=</span> <span class="st">"C:/Program Files/HEC/HEC-DSSVue"</span>,</span>
<span>  dss.messagelevel <span class="op">=</span> <span class="fl">1L</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="monolith">Monolith<a class="anchor" aria-label="anchor" href="#monolith"></a>
</h3>
<p><code>dssrip2</code> supports HEC Monolith.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dss_install_monolith.html">dss_install_monolith</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/dss_connect.html">dss_connect</a></span><span class="op">(</span>monolith <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To use Monolith automatically, set the following options in your R profile:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>dss.monolith <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>By default, <code>dssrip2</code> will install HEC-Monolith to your <code>%LOCALAPPDATA%</code> folder, but this can be overridden. If the option <code>dss.monolith</code> is set to <code>TRUE</code>, <code>dssrip2</code> will interpret the <code>dss.home</code> option as the HEC-Monolith file path.</p>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="file-connections">File connections<a class="anchor" aria-label="anchor" href="#file-connections"></a>
</h3>
<p>Connections to DSS files must be handled manually by the user. To create a file connection, use</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filepath</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/test.dss"</span>, package <span class="op">=</span> <span class="st">"dssrip2"</span><span class="op">)</span></span>
<span><span class="va">conn</span> <span class="op">=</span> <span class="fu"><a href="reference/dss_file.html">dss_file</a></span><span class="op">(</span><span class="va">filepath</span><span class="op">)</span></span></code></pre></div>
<p>DSS files will usually close on their own after some period of inactivity, but it is best practice for users to explicitly signal to DSS when they are finished working with a file by calling the file’s <code>$done()</code> method:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dss_close.html">dss_close</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span>
<span><span class="co"># or directly call conn$done()</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reading-data">Reading data<a class="anchor" aria-label="anchor" href="#reading-data"></a>
</h3>
<p><code>dssrip2</code> automatically detects the data type being read, so the same function call can be used for reading time series and paired data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># time series</span></span>
<span><span class="fu"><a href="reference/dss_read.html">dss_read</a></span><span class="op">(</span><span class="va">conn</span>, <span class="st">"/BRANDYWINE CREEK/WILMINGTON, DE/FLOW/01JAN1946/1DAY/USGS/"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># paired data</span></span>
<span><span class="fu"><a href="reference/dss_read.html">dss_read</a></span><span class="op">(</span><span class="va">conn</span>, <span class="st">"/BRANDYWINE CREEK/WILMINGTON, DE/FLOW-STAGE///GENERATED DATA PAIRS/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-data">Writing data<a class="anchor" aria-label="anchor" href="#writing-data"></a>
</h3>
<p><code>dssrip2</code> deduces the data type to write based on the supplied R object, so the same function call can be used for reading time series and paired data. However, writing DSS objects requires additional attributes that must be explicitly supplied by the user:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tf</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".dss"</span><span class="op">)</span></span>
<span><span class="va">conn</span> <span class="op">=</span> <span class="fu"><a href="reference/dss_open.html">dss_create</a></span><span class="op">(</span><span class="va">tf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># time series</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Nile</span><span class="op">)</span></span>
<span><span class="va">nile</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%d-10-01"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/time.html" class="external-link">time</a></span><span class="op">(</span><span class="va">Nile</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">Nile</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e8</span><span class="op">)</span></span>
<span><span class="va">nile_meta</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>units <span class="op">=</span> <span class="st">"cubic meters"</span>, type <span class="op">=</span> <span class="st">"PER-CUM"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="st">"//NILE RIVER/VOLUME//1YEAR/R DATASET/"</span></span>
<span><span class="fu"><a href="reference/dss_write.html">dss_write</a></span><span class="op">(</span><span class="va">nile</span>, <span class="va">conn</span>, <span class="va">path</span>, <span class="va">nile_meta</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># paired data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">CO2</span><span class="op">)</span></span>
<span><span class="va">uptake</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape</a></span><span class="op">(</span><span class="va">CO2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Plant"</span>, <span class="st">"conc"</span>, <span class="st">"uptake"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  direction <span class="op">=</span> <span class="st">"wide"</span>, idvar <span class="op">=</span> <span class="st">"conc"</span>, timevar <span class="op">=</span> <span class="st">"Plant"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">uptake</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"uptake."</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">uptake</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">uptake_meta</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>xtype <span class="op">=</span> <span class="st">"LINEAR"</span>, ytype <span class="op">=</span> <span class="st">"LINEAR"</span>,</span>
<span>  xunits <span class="op">=</span> <span class="st">"mL/L"</span>, yunits <span class="op">=</span> <span class="st">"umol/m^2"</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">uptake</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">uptake</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="st">"//PLANT CO2 UPTAKE/CONCENTRATION-UPTAKE///R DATASET/"</span></span>
<span><span class="fu"><a href="reference/dss_write.html">dss_write</a></span><span class="op">(</span><span class="va">uptake</span>, <span class="va">conn</span>, <span class="va">path</span>, <span class="va">uptake_meta</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mkoohafkan/dssrip2/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mkoohafkan/dssrip2/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dssrip2</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Koohafkan <br><small class="roles"> Author, maintainer </small>  </li>
<li>Evan Heisman <br><small class="roles"> Author </small>  </li>
<li>Cameron Bracken <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Koohafkan, Evan Heisman, Cameron Bracken.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
